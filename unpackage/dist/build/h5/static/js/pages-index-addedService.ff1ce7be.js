(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-addedService"],{"05f3":function(e,t,i){"use strict";var a,n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"page-bg"},[i("v-uni-view",{staticClass:"mian"},e._l(e.newData,(function(t,a){return"TakeBill"!=t.serviceKey?i("v-uni-view",{key:a,staticClass:"service-item",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.open(a)}}},[e._v(e._s(t.serviceTitle)),i("v-uni-view",{style:1==t.sub.isDefault?"color:#999":"color:#333"},[e._v(e._s(t.sub.remark)),i("v-uni-text",{staticClass:"iconfont icon--right-jian"})],1)],1):e._e()})),1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:e.isTakeBill,expression:"isTakeBill"}]},[i("v-uni-view",{staticClass:"service-item bill-title"},[e._v("提货单"),i("v-uni-view",[i("v-uni-switch",{staticClass:"switch-btn",attrs:{checked:e.isSwitch,color:"#4285F4"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.switchChange.apply(void 0,arguments)}}})],1)],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:e.isSwitch,expression:"isSwitch"}],staticClass:"take-bill-con"},[i("v-uni-text",{staticClass:"small-title"},[e._v("提货单信息")]),i("v-uni-textarea",{attrs:{placeholder:"请在此处填写提货单信息"},model:{value:e.takeDeliveryRemark,callback:function(t){e.takeDeliveryRemark=t},expression:"takeDeliveryRemark"}}),e.uploadList.length>0?i("v-uni-view",{staticClass:"img-list"},e._l(e.uploadList,(function(t,a){return i("v-uni-view",{key:a,style:"background-image:url("+t.url+")"},[i("v-uni-text",{staticClass:"iconfont icon-guanbi",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.delFile(a)}}})],1)})),1):e._e(),i("v-uni-view",{staticClass:"btn"},[i("v-uni-view",[i("v-uni-view",{ref:"inputImage",staticClass:"input-view"}),i("v-uni-text",{staticClass:"iconfont icon-tupian"})],1),i("v-uni-view",[i("v-uni-view",{ref:"inputFile",staticClass:"input-view"}),i("v-uni-text",{staticClass:"iconfont icon-folder_icon"})],1)],1)],1)],1),i("v-uni-button",{staticClass:"btn-default-css",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.btnConfirm.apply(void 0,arguments)}}},[e._v("确认")]),e.isShow?i("v-uni-view",{staticClass:"min-popup",class:[e.isShow?"min-show":"min-hide"]},[i("v-uni-view",{staticClass:"min-overlay",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.close.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"min-content"},[i("v-uni-text",{staticClass:"small-title"},[e._v(e._s(e.serviceList[e.index].serviceTitle))]),i("v-uni-view",{staticClass:"sub-list"},e._l(e.serviceList[e.index].listDetail,(function(t,a){return i("v-uni-text",{key:a,class:{active:e.newData[e.index].sub.remark==t.remark},on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.btnSelTH(t)}}},[e._v(e._s(t.remark))])})),1),i("v-uni-text",{staticClass:"note",class:{red:"PayType"==e.serviceList[e.index].serviceKey}},[e._v(e._s(e.serviceList[e.index].remark))])],1)],1):e._e()],1)},s=[];i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return a}))},"0da0":function(e,t,i){e.exports=i.p+"static/img/icon-active.0b22760e.png"},"0fa5":function(e,t,i){var a=i("6139");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("54ee0110",a,!0,{sourceMap:!1,shadowMode:!1})},"1d49":function(e,t,i){"use strict";var a=i("0fa5"),n=i.n(a);n.a},"1de5":function(e,t,i){"use strict";e.exports=function(e,t){return t||(t={}),e=e&&e.__esModule?e.default:e,"string"!==typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},3866:function(e,t,i){"use strict";i.r(t);var a=i("05f3"),n=i("d21b");for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);i("1d49");var l,r=i("f0c5"),o=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"f36156e2",null,!1,a["a"],l);t["default"]=o.exports},6139:function(e,t,i){var a=i("24fb"),n=i("1de5"),s=i("0da0");t=a(!1);var l=n(s);t.push([e.i,".mian[data-v-f36156e2]{margin-top:5px;padding:0 15px;background-color:#fff}.service-item[data-v-f36156e2]{padding:15px 0;border-top:1px solid #f7f7f7}.service-item > uni-view[data-v-f36156e2]{float:right;font-weight:700}.service-item > uni-view uni-text[data-v-f36156e2]{color:#dbdbdb;padding-left:5px;font-size:14px;font-weight:400}.min-popup[data-v-f36156e2]{position:fixed;top:0;bottom:0;left:0;right:0;z-index:999}.min-hide .min-content[data-v-f36156e2]{-webkit-animation:hide-data-v-f36156e2 .5s linear forwards;animation:hide-data-v-f36156e2 .5s linear forwards}.min-hide .min-overlay[data-v-f36156e2]{opacity:0}.min-show .min-content[data-v-f36156e2]{-webkit-animation:show-data-v-f36156e2 .5s linear forwards;animation:show-data-v-f36156e2 .5s linear forwards}.min-show .min-overlay[data-v-f36156e2]{opacity:1}.min-overlay[data-v-f36156e2]{position:absolute;top:0;bottom:0;left:0;right:0;background-color:rgba(0,0,0,.6);z-index:200;-webkit-transition:.3s;transition:.3s}.min-content[data-v-f36156e2]{background:#fff;position:absolute;left:0;right:0;bottom:0;z-index:300;overflow:hidden;padding:25px 15px}@-webkit-keyframes hide-data-v-f36156e2{0%{-webkit-transform:translateY(0);transform:translateY(0)}100%{-webkit-transform:translateY(100%);transform:translateY(100%)}}@keyframes hide-data-v-f36156e2{0%{-webkit-transform:translateY(0);transform:translateY(0)}100%{-webkit-transform:translateY(100%);transform:translateY(100%)}}@-webkit-keyframes show-data-v-f36156e2{0%{-webkit-transform:translateY(100%);transform:translateY(100%)}100%{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes show-data-v-f36156e2{0%{-webkit-transform:translateY(100%);transform:translateY(100%)}100%{-webkit-transform:translateY(0);transform:translateY(0)}}.min-content .small-title[data-v-f36156e2]{font-size:15px;display:block}.sub-list[data-v-f36156e2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-flow:wrap;flex-flow:wrap;margin:10px 0}.sub-list uni-text[data-v-f36156e2]{display:block;margin-right:10px;height:30px;line-height:30px;padding:0 14px;background:#f7f7f7;margin-bottom:10px}.sub-list uni-text.active[data-v-f36156e2]{background-color:#d6ebff;background-image:url("+l+");background-repeat:no-repeat;background-size:18px;background-position:100% 100%}.note[data-v-f36156e2]{display:block;font-size:12px;color:#666}.note.red[data-v-f36156e2]{color:red}.bill-title[data-v-f36156e2]{background-color:#fff;margin:10px 0;padding:15px}.take-bill-con[data-v-f36156e2]{background-color:#fff;padding:0 15px 15px}.take-bill-con .small-title[data-v-f36156e2]{display:block;padding:15px 0}.take-bill-con uni-textarea[data-v-f36156e2]{border:1px solid #dbdbdb;display:block;width:calc(100% - 20px);height:80px;padding:5px 10px;border-radius:3px}.take-bill-con .img-list[data-v-f36156e2]{padding-bottom:10px;border-bottom:1px solid #dbdbdb}.take-bill-con .img-list > uni-view[data-v-f36156e2]{display:inline-block;width:80px;height:80px;overflow:hidden;background-size:cover;background-position:50%;background-repeat:no-repeat;margin-right:8px;margin-top:10px;border:1px solid #eee}.take-bill-con .img-list .icon-guanbi[data-v-f36156e2]{float:right;color:#999;margin:2px}.take-bill-con .img-list uni-image[data-v-f36156e2]{width:100%;height:100%}.take-bill-con .btn[data-v-f36156e2]{display:-webkit-box;display:-webkit-flex;display:flex;margin-top:15px}.take-bill-con .btn > uni-view[data-v-f36156e2]{position:relative;margin-right:10px}.take-bill-con .btn uni-text[data-v-f36156e2]{margin-right:20px;font-size:22px;color:#999}",""]),e.exports=t},d21b:function(e,t,i){"use strict";i.r(t);var a=i("f1e6"),n=i.n(a);for(var s in a)"default"!==s&&function(e){i.d(t,e,(function(){return a[e]}))}(s);t["default"]=n.a},f1e6:function(e,t,i){"use strict";i("4de4"),i("4160"),i("ac1f"),i("1276"),i("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={data:function(){return{type:"",code:"",serviceList:[],isShow:!1,newData:[],index:0,takeBillIndex:0,isTakeBill:!1,isSwitch:!1,token:"",takeDeliveryRemark:"",uploadList:[]}},onLoad:function(e){this.type=e.type,this.code=e.code,this.token=uni.getStorageSync("token"),this.init()},mounted:function(){var e=this;this.$util.$refsFileHtml({formData:{FileName:"TakeDelivery",UploadType:10,SuffixName:""},$input:this.$refs.inputImage.$el},(function(t){e.callBack(t)}));var t=document.createElement("input");t.type="file",t.accept="application/pdf",t.onchange=function(i){e.uploadFileH5(t,i)},this.$refs.inputFile.$el.appendChild(t)},methods:{init:function(){var e=this;if("{}"!=JSON.stringify(e.$store.state.expressDeliveryInfo.service)&&(e.newData=e.$store.state.expressDeliveryInfo.service),1!=this.type){var t=e.$store.state.expressDeliveryInfo.takeBill;"{}"!=JSON.stringify(t)&&(this.isSwitch=t.takeBill,this.takeDeliveryRemark=t.takeDeliveryRemark,this.uploadList=t.takeDeliveryAttachment)}var i="/ExpressService/GetList";2==this.type&&(i="/ExpressCar/GetExpressServiceList"),e.$util.networkRequest({url:i,data:{companyCode:e.code},success:function(t){if(e.serviceList=t,1!=e.type&&t.forEach((function(t,i){"TakeBill"==t.serviceKey&&(e.isTakeBill=!0,e.takeBillIndex=i)})),0!=e.newData.length)return!1;var i=[];t.forEach((function(t,a){var n=t.listDetail[0];if("db001"==e.code&&"DeliveryType"==t.serviceKey&&t.listDetail.forEach((function(e){"送货（不含上楼）"==e.remark&&(n=e)})),"TakeBill"==t.serviceKey&&1==e.type)return!1;"TakeBill"==t.serviceKey&&(e.isTakeBill=!0,e.takeBillIndex=a),i.push({serviceTitle:t.serviceTitle,serviceKey:t.serviceKey,sub:{remark:n.remark,serviceKey:n.serviceKey,serviceValue:n.serviceValue,isDefault:n.isDefault}})})),e.newData=i}})},switchChange:function(e){var t=this,i=e.detail.value,a=i?1:0;t.isSwitch=i;var n=t.serviceList[t.takeBillIndex];n.listDetail.forEach((function(e){a==e.serviceValue&&(t.newData[t.takeBillIndex]["sub"]=e)}))},uploadImage:function(){var e=this;e.$util.chooseImage({formData:{FileName:"TakeDelivery",UploadType:10,SuffixName:""}},(function(t){e.callBack(t)}))},uploadFileWX:function(){var e=this;wx.chooseMessageFile({count:3,type:"file",success:function(t){var i=t.tempFiles,a=!0;i.forEach((function(t){var i=t.name.split(".")[1];"pdf"==i?e.$util.ajaxUploadFile({formData:{FileName:"TakeDelivery",UploadType:10,SuffixName:"."+i},filePath:t.path,name:t.name},(function(t){e.callBack(t)})):a=!1})),a||e.$util.showToast("目前文件只支持pdf文件上传")}})},callBack:function(e){var t=e.fileName.split(".")[1],i=e.data;"pdf"==t&&(i="../../static/images/pdf.png"),this.uploadList.push({path:e.data,suffix:t,url:i,fileName:e.fileName})},uploadFileH5:function(e,t){var i=this,a=e.files[0],n=a.name,s="."+n.split(".")[1];uni.uploadFile({url:i.apiUrl+"/Account/UploadFileWeb",header:{token:i.token,appId:i.appId},formData:{FileName:"TakeDelivery",UploadType:10,SuffixName:s},files:[{name:"update_file",file:a,uri:t.srcElement.value}],success:function(e){var t=JSON.parse(e.data);200==t.errCode&&i.uploadList.push({path:t.data,suffix:s,url:"../../static/images/pdf.png",fileName:n})},fail:function(e){console.log(e)}})},delFile:function(e){this.uploadList=this.uploadList.filter((function(t,i){return i!=e}))},btnConfirm:function(){if(this.$store.state.expressDeliveryInfo.service=this.newData,1!=this.type)if(this.isSwitch){if(""==this.takeDeliveryRemark||0==this.uploadList.length)return this.$util.showToast("启用提货单后需提货单信息及要求!"),!1;this.$store.state.expressDeliveryInfo.takeBill={takeBill:this.isSwitch,takeDeliveryRemark:this.takeDeliveryRemark,takeDeliveryAttachment:this.uploadList}}else this.$store.state.expressDeliveryInfo.takeBill={};this.$util.navigateBack(this)},btnSelTH:function(e){this.newData[this.index].sub={remark:e.remark,serviceKey:e.serviceKey,serviceValue:e.serviceValue}},open:function(e){this.isShow=!0,this.index=e},close:function(){var e=this;this.isShow=!1,setTimeout((function(){e.$emit("close")}),100)}}};t.default=a}}]);