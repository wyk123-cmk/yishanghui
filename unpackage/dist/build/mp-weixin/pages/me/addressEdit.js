(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/me/addressEdit"],{2392:function(e,t,s){"use strict";s.r(t);var o=s("79a0"),n=s("73a8");for(var a in n)"default"!==a&&function(e){s.d(t,e,(function(){return n[e]}))}(a);s("67ad"),s("708a");var i,r=s("f0c5"),d=Object(r["a"])(n["default"],o["b"],o["c"],!1,null,"a6a65dd4",null,!1,o["a"],i);t["default"]=d.exports},"353a":function(e,t,s){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){Promise.all([s.e("common/vendor"),s.e("components/address-picker/address-picker")]).then(function(){return resolve(s("1238"))}.bind(null,s)).catch(s.oe)},n=requirePlugin("WechatSI"),a=n.getRecordRecognitionManager(),i={data:function(){return{code:"",type:"",city:"",areaCode:"",isCopyShow:!1,txtContent:"",addressInfo:{name:"",companyName:"",phone:"",address:"",isDefault:!1},url:"/AddressBook/Post",isWarning:!1,isTalkBtn:!0,isCompany:!1,isRecognition:!1,talkEnd:!1}},components:{addressPicker:o},onBackPress:function(e){e.from},onLoad:function(t){var s=this;s.code=void 0==t.addresscode?"":t.addresscode,s.isTalkBtn=!0,s.showImage=getApp().globalData.isDiscountPopup,""!=s.code&&(s.getAddressInfo(),s.url="/AddressBook/Change",e.setNavigationBarTitle({title:"编辑地址"})),s.$util.IsPC()&&(s.isTalkBtn=!1),s.$util.networkRequest({url:"/Company/IsRegister",success:function(e){e&&(s.isCompany=!0)}}),void 0!=t.type&&(s.type=t.type),a.onStop=function(t){var o=t.result;if(console.log("识别结束事件",t),e.hideLoading(),""==o)return s.talkEnd=!1,void s.$util.showToast("未识别到语音,请重试!");s.txtContent=o,s.isRecognition=!1,s.isCopyShow=!0,s.talkEnd=!1},a.onError=function(t){e.hideLoading(),s.$util.showToast("未识别到语音,请重试!"),s.talkEnd=!1,console.log("onError:",t)}},methods:{btnSubmit:function(){var t=this;if(!t.Valid())return!1;var s={contactsCode:t.code,name:t.addressInfo.name,phone:t.addressInfo.phone,companyName:t.addressInfo.companyName,areaCode:t.areaCode,address:t.addressInfo.address,isDefault:t.addressInfo.isDefault,isShare:t.isWarning};e.showLoading({title:"更新中...",mask:!0}),t.$util.networkRequest({url:t.url,method:"POST",data:s,success:function(s){t.setAddressEdit(s);var o="添加成功";""!=t.code&&(o="更新成功"),e.showModal({title:"提示",content:o,showCancel:!1,success:function(e){e.confirm&&t.$util.navigateBack(t)}})}})},getFous:function(){e.createSelectorQuery().select(".tear").boundingClientRect((function(t){e.pageScrollTo({duration:0,scrollTop:t.top})})).exec()},setAddressEdit:function(e){if(""==this.type)return!1;var t={name:e.name,contactsCode:e.contactsCode,address:e.areaInfo.province+e.areaInfo.city+e.areaInfo.area+e.address,ad:e.address,areaCode:e.areaInfo.areaCode,phone:e.phone};if("send"==this.type){if(e.contactsCode==this.$store.state.expressDeliveryInfo["repAddress"].contactsCode)return!1;this.$store.state.expressDeliveryInfo["sendAddress"]=t}if("rep"==this.type){if(e.contactsCode==this.$store.state.expressDeliveryInfo["sendAddress"].contactsCode)return!1;this.$store.state.expressDeliveryInfo["repAddress"]=t}},switchChange:function(e){this.isWarning=e.target.value},cleanInfo:function(){this.addressInfo.name="",this.addressInfo.phone="",this.addressInfo.companyName="",this.addressInfo.address="",this.addressInfo.isDefault=!1,this.city="",this.areaCode="",this.txtContent="",this.isCopyShow=!1},textareaInput:function(e){var t=e.detail.value;this.isCopyShow=""!=t},btnCopyOk:function(){e.pageScrollTo({scrollTop:0,duration:0});var t=this,s=t.$util.stripAddress(t.txtContent);e.showLoading({title:"智能识别中..."}),t.$util.networkRequest({url:"/AddressBook/GetAddressAutoInfo",data:{addressText:s},success:function(e){if(t.addressInfo.name=e.name,t.addressInfo.phone=e.phone,t.addressInfo.address=e.detail,t.areaCode=e.areaCode,!t.$util.isNotEmpty(e.province)&&!t.$util.isNotEmpty(e.city)&&!t.$util.isNotEmpty(e.area))return t.$util.showToast("自动识别失败,请手动选择省市区"),!1;t.city=e.province+"-"+e.city+"-"+e.area}})},Valid:function(){if(!this.$util.isNotEmpty(this.addressInfo.name))return this.$util.showToast("姓名不能为空"),!1;if(!this.$util.isNotEmpty(this.addressInfo.phone))return this.$util.showToast("手机号不能为空"),!1;if(this.addressInfo.phone.indexOf("*")<0){if(/[A-Za-z]/.test(this.addressInfo.phone))return this.$util.showToast("联系电话格式不正确"),!1;if(/[\u4e00-\u9fa5]/.test(this.addressInfo.phone))return this.$util.showToast("联系电话格式不正确"),!1}return this.$util.isNotEmpty(this.areaCode)?!!this.$util.isNotEmpty(this.addressInfo.address)||(this.$util.showToast("详细地址不能为空"),!1):(this.$util.showToast("请选择省市区"),!1)},checkboxChange:function(){this.addressInfo.isDefault=!this.addressInfo.isDefault},cityPickerChange:function(e){this.city=e.detail.value[0]+"-"+e.detail.value[1]+"-"+e.detail.value[2],this.areaCode=e.detail.code[2]},getAddressInfo:function(){var t=this;e.showLoading({mask:!0,title:"加载中..."}),t.$util.networkRequest({url:"/AddressBook/Get",data:{contactsCode:t.code},success:function(e){t.addressInfo=e,t.isWarning=e.isShare,t.city=e.areaInfo.province+"-"+e.areaInfo.city+"-"+e.areaInfo.area,t.areaCode=e.areaInfo.areaCode}})},openTalk:function(){var e=this;wx.authorize({scope:"scope.record",success:function(){e.isRecognition=!0},fail:function(){wx.showModal({title:"提示",content:"您未授权录音，功能将无法使用",showCancel:!0,confirmText:"授权",success:function(t){t.confirm&&wx.openSetting({success:function(t){t.authSetting["scope.record"]?e.$util.showToast("设置录音授权成功"):console.log("未设置录音授权")}})}})}})},cancelTalk:function(){this.isRecognition=!1,this.talkEnd=!1,a.stop()},streamRecord:function(){var e=this;e.talkEnd=!0,a.start({duration:6e4,lang:"zh_CN"})},endStreamRecord:function(t){e.showLoading({mask:!0,title:"正在识别……"}),a.onRecognize=function(e){console.log("有新的识别内容返回，则会调用此事件",e),a.stop()}}}};t.default=i}).call(this,s("543d")["default"])},"67ad":function(e,t,s){"use strict";var o=s("d40c"),n=s.n(o);n.a},"708a":function(e,t,s){"use strict";var o=s("eba2"),n=s.n(o);n.a},"73a8":function(e,t,s){"use strict";s.r(t);var o=s("353a"),n=s.n(o);for(var a in o)"default"!==a&&function(e){s.d(t,e,(function(){return o[e]}))}(a);t["default"]=n.a},"748b":function(e,t,s){"use strict";(function(e){s("b397");o(s("66fd"));var t=o(s("2392"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,s("543d")["createPage"])},"79a0":function(e,t,s){"use strict";var o={addressPicker:function(){return Promise.all([s.e("common/vendor"),s.e("components/address-picker/address-picker")]).then(s.bind(null,"1238"))}},n=function(){var e=this,t=e.$createElement;e._self._c},a=[];s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return o}))},d40c:function(e,t,s){},eba2:function(e,t,s){}},[["748b","common/runtime","common/vendor"]]]);