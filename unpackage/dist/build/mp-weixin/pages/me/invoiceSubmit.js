(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/me/invoiceSubmit","components/address-picker/address-picker"],{"0695":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("4795"));function a(t){return t&&t.__esModule?t:{default:t}}function o(t,e){return l(t)||c(t,e)||s(t,e)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t,e){if(t){if("string"===typeof t)return u(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function c(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var i=[],n=!0,a=!1,o=void 0;try{for(var r,s=t[Symbol.iterator]();!(n=(r=s.next()).done);n=!0)if(i.push(r.value),e&&i.length===e)break}catch(u){a=!0,o=u}finally{try{n||null==s["return"]||s["return"]()}finally{if(a)throw o}}return i}}function l(t){if(Array.isArray(t))return t}function f(t,e,i,n,a,o,r){try{var s=t[o](r),u=s.value}catch(c){return void i(c)}s.done?e(u):Promise.resolve(u).then(n,a)}function d(t){return function(){var e=this,i=arguments;return new Promise((function(n,a){var o=t.apply(e,i);function r(t){f(o,n,a,r,s,"next",t)}function s(t){f(o,n,a,r,s,"throw",t)}r(void 0)}))}}var h={name:"addressPicker",props:{defaultValue:{type:[Array,String],default:""},disabled:{type:Boolean,default:!1},state:{type:String,default:""}},data:function(){return{pickerValue:[],isDisabled:!1,range:[],zones_tree:[]}},watch:{defaultValue:function(){this.defaultValue=this.defaultValue,this.value_format(),this.range_set()}},created:function(){var e=d(n.default.mark((function e(i){var a,r,s,u,c;return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=this,!a.$store.state.addressInit){e.next=14;break}return a.$store.state.addressInit=!1,t.showLoading({title:"加载...",mask:!0}),e.next=6,t.request({url:a.apiUrl+"/Area/GetListEx",dataType:"json",method:"GET"});case 6:r=e.sent,s=o(r,2),s[0],u=s[1],a.$store.state.addressJson=u.data.data,a.setTree(),e.next=15;break;case 14:c=setInterval((function(){a.$store.state.addressJson.length>0&&(clearInterval(c),a.setTree())}),1e3);case 15:case"end":return e.stop()}}),e,this)})));function i(t){return e.apply(this,arguments)}return i}(),methods:{setTree:function(){this.zones_tree=this.$store.state.addressJson,this.isDisabled=this.disabled,this.value_format(),this.range_set(),t.hideLoading()},value_format:function(){var t=this.defaultValue;"string"==typeof t&&t.indexOf(",")>0&&(t=t.split(","));var e=0,i=0,n=0;"string"==typeof t?(this.zones_tree.forEach((function(a,o){a.list.forEach((function(a,r){a.list.forEach((function(a,s){a.code==t&&(e=o,i=r,n=s)}))}))})),this.pickerValue=[e,i,n]):"string"==typeof t[0]?(this.zones_tree.forEach((function(a,o){a.title==t[0]&&(e=o,a.list.forEach((function(e,a){e.title==t[1]&&(i=a,e.list.forEach((function(e,i){e.title==t[2]&&(n=i)})))})))})),this.pickerValue=[e,i,n]):this.pickerValue=t},range_set:function(){var t=this,e=[[],[],[]];if(2==this.state)e=[[],[]];this.zones_tree.forEach((function(i,n){e[0].push(i.title),n==t.pickerValue[0]&&i.list.forEach((function(i,n){e[1].push(i.title),2!=t.state&&n==t.pickerValue[1]&&i.list.forEach((function(t,i){e[2].push(t.title)}))}))})),this.range=e},region_change:function(t){var e=t.detail.value,i=[],n=[],a=this.zones_tree[e[0]];i.push(a.title),n.push(a.code);var o=a.list[e[1]];if(i.push(o.title),n.push(o.code),2!=this.state){var r=o.list[e[2]];i.push(r.title),n.push(r.code)}t.detail={code:n,value:i,data:r},this.$emit("change",t)},region_change_col:function(t){this.pickerValue[t.detail.column]=t.detail.value,this.range_set(),this.$emit("columnchange",t)},region_cancel:function(t){this.$emit("cancel",t)}}};e.default=h}).call(this,i("543d")["default"])},1238:function(t,e,i){"use strict";i.r(e);var n=i("5a32"),a=i("6e02");for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);var r,s=i("f0c5"),u=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],r);e["default"]=u.exports},"1ef0":function(t,e,i){"use strict";(function(t){i("b397");n(i("66fd"));var e=n(i("fa84"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},"3b05":function(t,e,i){"use strict";var n={addressPicker:function(){return Promise.resolve().then(i.bind(null,"1238"))}},a=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.isNotice=!0,t.isTextarea=!1},t.e1=function(e){t.isNotice=!1,t.isTextarea=!0},t.e2=function(e){t.isInvoice=!1,t.isTextarea=!0})},o=[];i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}))},"524d":function(t,e,i){"use strict";i.r(e);var n=i("d4cb"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},"5a32":function(t,e,i){"use strict";var n,a=function(){var t=this,e=t.$createElement;t._self._c},o=[];i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}))},"6e02":function(t,e,i){"use strict";i.r(e);var n=i("0695"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},7492:function(t,e,i){"use strict";var n=i("ed7e"),a=i.n(n);a.a},d4cb:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;n(i("1238"));function n(t){return t&&t.__esModule?t:{default:t}}var a={data:function(){return{totalSum:0,companyData:[],isShowCompany:!1,city:"",address:"",isNotice:!1,isInvoice:!1,isTextarea:!0,invoiceData:{mastCodeList:[],invoiceType:"Company",invoiceName:"",invoiceNumber:"",billType:"PInvoince",invoiceRemark:"",name:"",phone:"",mail:"",address:""}}},created:function(){this.showImage=getApp().globalData.isDiscountPopup;var t=this.$store.state.invoiceInfo,e=this;void 0!=t&&(e.totalSum=t.totalSum,e.invoiceData.mastCodeList=t.mastCode),e.getUserHistoryInfo()},methods:{confirm:function(){var t=this,e=t.invoiceData;if("Company"==e.invoiceType){if(!this.$util.isNotEmpty(e.invoiceName))return t.$util.showToast("请填写发票抬头"),!1;if(!this.$util.isNotEmpty(e.invoiceNumber))return t.$util.showToast("企业开票请填写纳税人识别号"),!1}if("Person"==e.invoiceType){if(!this.$util.isNotEmpty(e.invoiceName))return t.$util.showToast("请填写开票人姓名"),!1;if(!this.$util.isNotEmpty(e.invoiceNumber))return t.$util.showToast("请填写开票人手机号"),!1}return this.$util.isNotEmpty(e.name)?this.$util.isNotEmpty(e.phone)?this.$util.isNotEmpty(e.mail)?this.$util.isNotEmpty(t.city)?this.$util.isNotEmpty(t.address)?(e.address=t.city+" "+t.address,t.isInvoice=!0,void(t.isTextarea=!1)):(t.$util.showToast("请填写收票详细地址"),!1):(t.$util.showToast("请选择收票地址"),!1):(t.$util.showToast("请填写收票人邮箱"),!1):(t.$util.showToast("请填写收票人手机号"),!1):(t.$util.showToast("请填写收票人姓名"),!1)},twoConfirm:function(){var e=this;t.showLoading({mask:!0,title:"加载中..."}),e.$util.networkRequest({url:"/Invoice/Post",method:"POST",data:e.invoiceData,success:function(i){e.isInvoice=!1,t.redirectTo({url:"/pages/me/historicalInvoice"})}})},btnCompanyName:function(t){this.isShowCompany=!1,this.invoiceData.invoiceName=t.companyName,this.invoiceData.invoiceNumber=t.creditCode,this.companyData=[]},getCompanyName:function(t){var e=this,i=t.detail.value;if(this.invoiceData.invoiceName=i,""==i)return e.isShowCompany=!1,e.companyData=[],!1;e.$util.networkRequest({url:"/Account/GetCompanyName",data:{keyWord:i},success:function(t){0==t.length?e.isShowCompany=!1:e.isShowCompany=!0,e.companyData=t}})},radioChange:function(t){this.invoiceData.invoiceType=t.detail.value,this.invoiceData.invoiceName="",this.invoiceData.invoiceNumber=""},cityPickerChange:function(t){this.city=t.detail.value[0]+"-"+t.detail.value[1]+"-"+t.detail.value[2]},getUserHistoryInfo:function(){var t=this;t.$util.networkRequest({url:"/Invoice/GetLastInvoiceInfo",success:function(e){if(-1!=e.address.indexOf("-")){var i=e.address.split("-"),n=i[2].split(" "),a="",o="";1==n.length?o=i[2]:(a="-"+n[0],o=n[1]),t.city=i[0]+"-"+i[1]+a,t.address=o}t.invoiceData.name=e.name,t.invoiceData.phone=e.invoicePhone,t.invoiceData.mail=e.invoiceEmail}})}}};e.default=a}).call(this,i("543d")["default"])},ed7e:function(t,e,i){},fa84:function(t,e,i){"use strict";i.r(e);var n=i("3b05"),a=i("524d");for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("7492");var r,s=i("f0c5"),u=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"b6e50484",null,!1,n["a"],r);e["default"]=u.exports}},[["1ef0","common/runtime","common/vendor"]]]);