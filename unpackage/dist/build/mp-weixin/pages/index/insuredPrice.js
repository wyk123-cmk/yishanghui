(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/insuredPrice"],{"0716":function(e,t,n){"use strict";var o,r=function(){var e=this,t=e.$createElement;e._self._c},i=[];n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}))},"10d7":function(e,t,n){"use strict";n.r(t);var o=n("0716"),r=n("cb94");for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);n("9e54");var a,c=n("f0c5"),s=Object(c["a"])(r["default"],o["b"],o["c"],!1,null,"f49c9884",null,!1,o["a"],a);t["default"]=s.exports},4454:function(e,t,n){"use strict";(function(e){n("b397");o(n("66fd"));var t=o(n("10d7"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"5c71":function(e,t,n){},"98e0":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{type:"",code:"",mark:"",isInsurance:!1,isPrice:!1,amount:"",checkeMoney:"0.00",platformList:[],actvieIndex:"-1",explainHtml:"",compayData:[]}},onLoad:function(t){var n=this;n.type=t.type,n.code=t.code,n.mark=t.mark,n.isInsurance="true"==t.isInsurance,n.isPrice="small"==n.type&&"true"!=t.isInsurance,n.showImage=getApp().globalData.isDiscountPopup;var o="";"db001"==n.code?o="德邦保价":"sf001"==n.code?o="顺丰保价":"ky001"==n.code&&(o="跨越保价");var r=JSON.parse(e.getStorageSync("companyPrice"));n.compayData=[{companyCode:n.code,companyName:o,insuranceUpper:r.upperAmount,insuranceMemo:"",markAmount:"--",money:"--",insuranceText:r.insuranceText,isError:!1}],"sf001"!=n.code&&(n.platformList=n.compayData),n.getList()},methods:{btnNoPrice:function(){this.$store.state.expressDeliveryInfo.insuredPrice={price:0,amount:"不保价",code:"",agreementContent:""},this.$util.navigateBack(this),e.removeStorageSync("insuredPrice")},btnOkPrice:function(){var t=this.actvieIndex;if("-1"==t)return this.$util.showToast("请选择产品类型"),!1;var n={amount:this.amount,price:this.checkeMoney,code:this.platformList[t].companyCode};return this.$util.isNotEmpty(n.amount)?n.code!=this.code&&n.amount<1e3?(this.$util.showToast("第三方保险最低金额限制1000元,最低收费3元,费率为3‰"),!1):(e.setStorage({key:"insuredPrice",data:JSON.stringify(n)}),this.$store.state.expressDeliveryInfo.insuredPrice=n,void this.$util.navigateBack(this)):(this.$util.showToast("请填写保价金额"),!1)},goChecke:function(e,t){if(this.amount>t.insuranceUpper)return!1;this.actvieIndex=e,this.checkeMoney=t.money},inputAmount:function(e){var t=this,n=e.detail.value,o=[];this.amount=n,this.platformList.forEach((function(e){n>e.insuranceUpper?(e.isError=!0,t.actvieIndex="-1",t.checkeMoney="0.00"):(o.push(e.companyCode),e.isError=!1)})),0!=o.length&&this.setPrice(o)},setPrice:function(e){var t=this;t.$util.networkRequest({url:"/Price/InsuranceNewPrice",method:"POST",data:{companyCodeList:e,amount:t.amount,expressType:t.type},success:function(e){if(null==e)return!1;for(var n=0;n<e.length;n++)t.platformList.forEach((function(t){t.companyCode==e[n].companyCode&&(t.money=e[n].ratioAmount,t.markAmount=e[n].markAmount)}))}})},getList:function(){var t=this;e.showLoading({title:"数据加载..."}),t.$util.networkRequest({url:"/InsuranceCompany/GetList",success:function(n){if(0==n.length)return!1;n.forEach((function(e){e["markAmount"]="--",e["money"]="--",e["isError"]=!1})),t.platformList=t.platformList.concat(n),"sf001"==t.code&&(t.platformList=t.platformList.concat(t.compayData));var o=e.getStorageSync("insuredPrice");if(""!=o&&void 0!=o){var r=0,i=[];o=JSON.parse(o),t.amount=o.amount,t.platformList.forEach((function(e,t){o.code==e.companyCode&&(r=t),i.push(e.companyCode)})),t.setPrice(i),t.actvieIndex=r,t.checkeMoney=o.price}t.getInsuranceAgree()}})},getInsuranceAgree:function(){var e=this;e.$util.networkRequest({url:"/Price/GetInsuranceAgree",data:{companyCode:e.code,expressType:e.type},success:function(t){e.platformList.forEach((function(n){e.code==n.companyCode&&(n.insuranceMemo=t)}))}})}}};t.default=n}).call(this,n("543d")["default"])},"9e54":function(e,t,n){"use strict";var o=n("5c71"),r=n.n(o);r.a},cb94:function(e,t,n){"use strict";n.r(t);var o=n("98e0"),r=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=r.a}},[["4454","common/runtime","common/vendor"]]]);