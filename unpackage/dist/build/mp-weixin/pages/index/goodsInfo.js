(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/goodsInfo"],{"29d5":function(t,i,e){"use strict";var o,s=function(){var t=this,i=t.$createElement,e=(t._self._c,t.__map(t.dataList,(function(i,e){var o=String(i.goodsCode);return{$orig:t.__get_orig(i),m0:o}})));t._isMounted||(t.e0=function(i){t.isOftenGoods=!0,t.goodsNameList=[]},t.e1=function(i){t.isOftenGoods=!1},t.e2=function(i){t.isOftenGoods=!1}),t.$mp.data=Object.assign({},{$root:{l0:e}})},a=[];e.d(i,"b",(function(){return s})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){return o}))},"3ad0":function(t,i,e){"use strict";(function(t){e("b397");o(e("66fd"));var i=o(e("8ba6"));function o(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,e("543d")["createPage"])},4158:function(t,i,e){"use strict";var o=e("65ca"),s=e.n(o);s.a},"43af":function(t,i,e){"use strict";e.r(i);var o=e("a963"),s=e.n(o);for(var a in o)"default"!==a&&function(t){e.d(i,t,(function(){return o[t]}))}(a);i["default"]=s.a},"65ca":function(t,i,e){},"8ba6":function(t,i,e){"use strict";e.r(i);var o=e("29d5"),s=e("43af");for(var a in s)"default"!==a&&function(t){e.d(i,t,(function(){return s[t]}))}(a);e("4158");var n,r=e("f0c5"),u=Object(r["a"])(s["default"],o["b"],o["c"],!1,null,"7d8b198b",null,!1,o["a"],n);i["default"]=u.exports},a963:function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e={data:function(){return{type:"",goodName:"",stdmodeArray:["仪器整机","仪器设备","试剂耗材","化玻设备","实验家具","其他"],goodType:"",materialArray:["纸","纤","木箱","木架","托膜","托木"],materialTxt:"",goodsNameList:[],takeTxt:"",txtheight:"",txtWidth:"",txtLong:"",goodMemo:"",txtnum:1,txtweight:"",volume:"",ispack:!1,isjd:!1,islink:!1,isOftenGoods:!1,current:"",page:1,limit:10,total:0,dataList:[],code:""}},onLoad:function(t){this.showImage=getApp().globalData.isDiscountPopup,this.type=t.type,"small"==t.type&&(this.stdmodeArray=["文件","仪器整机","仪器设备","试剂耗材","化玻设备","其他"]),this.code=t.code;var i=this.$store.state.expressDeliveryInfo.goodInfo;"{}"!=JSON.stringify(i)?(this.goodType=i.packType,this.materialTxt=i.packageservice,this.goodName=i.goodName,this.txtweight=i.weigth,this.txtWidth=i.width,this.txtheight=i.height,this.txtLong=i.long,this.volume=i.cubic,this.takeTxt=i.remark,this.txtnum=i.goodNum,this.goodMemo=i.goodMemo):this.goodType=this.stdmodeArray[0],this.page=1,this.dataList=[],this.getGoodsList()},computed:{txtCubic1:function(){try{var t=Number(this.txtLong),i=Number(""==this.txtheight?0:this.txtheight),e=Number(""==this.txtWidth?0:this.txtWidth),o=t*i*e/1e6;return o}catch(s){}}},watch:{txtCubic1:function(t){console.log(t),this.volume=t>0?t:0},txtweight:function(t){""!==t&&(this.txtweight<=1&&(this.txtweight=1),"small"===this.type&&this.txtweight>=20&&(this.txtweight=20))}},methods:{btnSumit:function(){if(!this.Valid())return!1;var t={packType:this.goodType,packageservice:this.materialTxt,goodName:this.goodName,weigth:this.txtweight,width:this.txtWidth,height:this.txtheight,long:this.txtLong,cubic:this.volume,remark:this.takeTxt,goodNum:this.txtnum,goodMemo:this.goodMemo};this.$store.state.expressDeliveryInfo.goodInfo=t,this.$util.navigateBack(this)},btnGetGoodName:function(t){this.goodName=t,this.goodsNameList=[]},stdmodeChange:function(t){this.goodType=this.stdmodeArray[t.detail.value]},materialChange:function(t){this.materialTxt=this.materialArray[t.detail.value]},computeNum:function(t){if(0==t){if(this.txtnum<=1)return!1;this.txtnum--}else this.txtnum++},computeWeight:function(t){if(0==t){if(this.txtweight<=1)return!1;this.txtweight--}else this.txtweight++},btnIsPack:function(){this.ispack?this.takeTxt=this.takeTxt.replace("请带纸箱 ",""):this.takeTxt+="请带纸箱 ",this.ispack=!this.ispack},btnIsjd:function(){this.isjd?this.takeTxt=this.takeTxt.replace("请带胶带 ",""):this.takeTxt+="请带胶带 ",this.isjd=!this.isjd},btnIslink:function(){this.islink?this.takeTxt=this.takeTxt.replace("上门前联系 ",""):this.takeTxt+="上门前联系 ",this.islink=!this.islink},radioChange:function(t){this.current=t.target.value},btnPreserve:function(){var t=this;if(""==t.current)return!1;t.dataList.forEach((function(i,e){t.current==i.goodsCode&&(t.goodType=i.goodsCategory,t.materialTxt=null==i.packageservice?"":i.packageservice,t.goodName=i.goodsName,t.txtweight=i.goodsWeight,t.takeTxt=null==i.remark?"":i.remark,t.goodMemo=null==i.memo?"":i.memo,t.isOftenGoods=!1,""!=i.insurance&&null!=i.insurance&&t.setPrice(i.insurance))}))},setPrice:function(i){var e=this;e.$util.networkRequest({url:"/Price/InsuranceNewPrice",method:"POST",data:{companyCodeList:[e.code],amount:i,expressType:e.type},success:function(o){var s={price:o[0].ratioAmount,amount:i,code:e.code};e.$store.state.expressDeliveryInfo.insuredPrice=s,t.setStorage({key:"insuredPrice",data:JSON.stringify(s)})}})},goodsDelete:function(i){var e=this;t.showModal({title:"提示",content:"您确定要删除吗？",success:function(o){o.confirm&&e.$util.networkRequest({url:"/CommonGoods/Delete",data:{value:i},method:"POST",success:function(o){t.showToast({title:"删除成功",duration:2e3,icon:"none"}),e.dataList=e.dataList.filter((function(t){return t.goodsCode!=i}))}})}})},goodNameInput:function(t){var i=t.detail.value,e=this;if(""==i)return e.goodsNameList=[],!1;e.$util.networkRequest({url:"/GoodsName/GetGoodsNameList",data:{goodsName:i},success:function(t){e.goodsNameList=t}})},scrolltolower:function(){Math.ceil(this.total/this.limit)>=this.page&&this.getGoodsList()},getGoodsList:function(){var t=this;t.$util.networkRequest({url:"/CommonGoods/GetPageList",data:{page:t.page,limit:t.limit},success:function(i){var e=i.total;if(0==e||0==i.list.length)return!1;t.page++,t.total=e,t.dataList=t.dataList.concat(i.list)}})},Valid:function(){if(!this.$util.isNotEmpty(this.goodName))return this.$util.showToast("物品名称不能为空"),!1;if(!this.$util.isNotEmpty(this.txtweight))return this.$util.showToast("预估重量不能为空"),!1;if("big"==this.type){if(this.txtweight<20)return this.$util.showToast("大件重量不得小于20公斤，小件寄快递更实惠"),!1}else if(this.txtweight>20)return this.$util.showToast("小件重量不得大于20公斤，大件寄快递更实惠"),!1;return!0}}};i.default=e}).call(this,e("543d")["default"])}},[["3ad0","common/runtime","common/vendor"]]]);