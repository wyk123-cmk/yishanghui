(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/addedService"],{3866:function(e,t,i){"use strict";i.r(t);var a=i("fe14"),s=i("d21b");for(var n in s)"default"!==n&&function(e){i.d(t,e,(function(){return s[e]}))}(n);i("8569");var l,r=i("f0c5"),o=Object(r["a"])(s["default"],a["b"],a["c"],!1,null,"029c63e3",null,!1,a["a"],l);t["default"]=o.exports},"454f":function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={data:function(){return{type:"",code:"",serviceList:[],isShow:!1,newData:[],index:0,takeBillIndex:0,isTakeBill:!1,isSwitch:!1,token:"",takeDeliveryRemark:"",uploadList:[]}},onLoad:function(t){this.type=t.type,this.code=t.code,this.token=e.getStorageSync("token"),this.showImage=getApp().globalData.isDiscountPopup,this.init()},mounted:function(){},methods:{init:function(){var e=this;if("{}"!=JSON.stringify(e.$store.state.expressDeliveryInfo.service)&&(e.newData=e.$store.state.expressDeliveryInfo.service),1!=this.type){var t=e.$store.state.expressDeliveryInfo.takeBill;"{}"!=JSON.stringify(t)&&(this.isSwitch=t.takeBill,this.takeDeliveryRemark=t.takeDeliveryRemark,this.uploadList=t.takeDeliveryAttachment)}var i="/ExpressService/GetList";2==this.type&&(i="/ExpressCar/GetExpressServiceList"),e.$util.networkRequest({url:i,data:{companyCode:e.code},success:function(t){if(e.serviceList=t,1!=e.type&&t.forEach((function(t,i){"TakeBill"==t.serviceKey&&(e.isTakeBill=!0,e.takeBillIndex=i)})),0!=e.newData.length)return!1;var i=[];t.forEach((function(t,a){var s=t.listDetail[0];if("db001"==e.code&&"DeliveryType"==t.serviceKey&&t.listDetail.forEach((function(e){"送货（不含上楼）"==e.remark&&(s=e)})),"TakeBill"==t.serviceKey&&1==e.type)return!1;"TakeBill"==t.serviceKey&&(e.isTakeBill=!0,e.takeBillIndex=a),i.push({serviceTitle:t.serviceTitle,serviceKey:t.serviceKey,sub:{remark:s.remark,serviceKey:s.serviceKey,serviceValue:s.serviceValue,isDefault:s.isDefault}})})),e.newData=i}})},switchChange:function(e){var t=this,i=e.detail.value,a=i?1:0;t.isSwitch=i;var s=t.serviceList[t.takeBillIndex];s.listDetail.forEach((function(e){a==e.serviceValue&&(t.newData[t.takeBillIndex]["sub"]=e)}))},uploadImage:function(){var e=this;e.$util.chooseImage({formData:{FileName:"TakeDelivery",UploadType:10,SuffixName:""}},(function(t){e.callBack(t)}))},uploadFileWX:function(){var t=this;wx.chooseMessageFile({type:"file",success:function(i){var a=i.tempFiles,s=!0,n="";a.forEach((function(e){var i=e.name.split("."),a=i[i.length-1];"pdf"==a?t.$util.ajaxUploadFile({formData:{FileName:"TakeDelivery",UploadType:10,SuffixName:"."+a},filePath:e.path,name:e.name},(function(e){t.callBack(e)})):(n+=n+e.name+"、",s=!1)})),s||(n=n.substring(0,n.length-1),e.showModal({title:"提示",content:"目前文件支持xlsx、docx、doc、pdf上传,\n"+n+"上传失败!",showCancel:!1}))}})},callBack:function(e){var t=e.fileName.split(".")[1],i=e.data;"pdf"==t&&(i="../../static/images/pdf.png"),this.uploadList.push({path:e.data,suffix:t,url:i,fileName:e.fileName})},uploadFileH5:function(t,i){var a=this,s=t.files[0],n=s.name,l=n.split("."),r="."+l[l.length-1];e.uploadFile({url:a.apiUrl+"/Account/UploadFileWeb",header:{token:a.token,appId:a.appId},formData:{FileName:"TakeDelivery",UploadType:10,SuffixName:r},files:[{name:"update_file",file:s,uri:i.srcElement.value}],success:function(e){var t=JSON.parse(e.data);200==t.errCode?a.uploadList.push({path:t.data,suffix:r,url:"../../static/images/pdf.png",fileName:n}):a.$util.showToast(t.message)},fail:function(e){console.log(e)}})},delFile:function(e){this.uploadList=this.uploadList.filter((function(t,i){return i!=e}))},btnConfirm:function(){if(this.$store.state.expressDeliveryInfo.service=this.newData,1!=this.type)if(this.isSwitch){if(""==this.takeDeliveryRemark||0==this.uploadList.length)return this.$util.showToast("启用提货单后需提货单信息及要求!"),!1;this.$store.state.expressDeliveryInfo.takeBill={takeBill:this.isSwitch,takeDeliveryRemark:this.takeDeliveryRemark,takeDeliveryAttachment:this.uploadList}}else this.$store.state.expressDeliveryInfo.takeBill={};this.$util.navigateBack(this)},btnSelTH:function(e){this.newData[this.index].sub={remark:e.remark,serviceKey:e.serviceKey,serviceValue:e.serviceValue}},open:function(e){this.isShow=!0,this.index=e},close:function(){var e=this;this.isShow=!1,setTimeout((function(){e.$emit("close")}),100)}}};t.default=i}).call(this,i("543d")["default"])},"719d":function(e,t,i){},"79ba":function(e,t,i){"use strict";(function(e){i("b397");a(i("66fd"));var t=a(i("3866"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("543d")["createPage"])},8569:function(e,t,i){"use strict";var a=i("719d"),s=i.n(a);s.a},d21b:function(e,t,i){"use strict";i.r(t);var a=i("454f"),s=i.n(a);for(var n in a)"default"!==n&&function(e){i.d(t,e,(function(){return a[e]}))}(n);t["default"]=s.a},fe14:function(e,t,i){"use strict";var a,s=function(){var e=this,t=e.$createElement;e._self._c},n=[];i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return a}))}},[["79ba","common/runtime","common/vendor"]]]);