(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/orderList"],{2334:function(t,e,s){},"63dc":function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={data:function(){return{barcodeImg:"",tabIndex:1,isMore:!1,statusData:[{txt:"待揽收",key:1},{txt:"运输中",key:3},{txt:"已签收",key:4},{txt:"已取消",key:9}],keyword:"",status:[],mode:"",paymode:"",limit:5,sentTotal:0,receiveTotal:0,sentPage:1,receivePage:1,sentList:[],receiveList:[],showImage:!1,startYear:2019,isPicker:0,startDate:"",startArray:[],startIndex:[0,0,0],endDate:"",endArray:[],endIndex:[0,0,0],isBarCode:!1,collect:{isCompany:!1,expressCode:""},canvasCode:""}},onLoad:function(t){var e=getApp();e.isToken(),1==t.orderType&&(this.tabIndex=2)},onShow:function(){var t=getApp();this.showImage=t.globalData.isDiscountPopup,this.keyword="",this.sentPage=1,this.receivePage=1,this.sentList=[],this.receiveList=[],this.reset(),this.getExpressTotal(),void 0==this.$store.state.orderType||""==this.$store.state.orderType||(this.tabIndex=this.$store.state.orderType,this.$store.state.orderType="")},onHide:function(){this.$store.state.orderType=1},created:function(){for(var t=new Date,e=[],s=this.startYear;s<=t.getFullYear();s++)e.push(s+"年");var i=e.length-1,a=this.$util.getMonth(e[i]),r=a.length-1,n=this.$util.getDays(e[i],a[r]),o=n.length-1;this.startArray[0]=e,this.startArray[1]=a,this.startArray[2]=n,this.endArray[0]=e,this.endArray[1]=a,this.endArray[2]=n,this.startIndex=[i,r,o],this.endIndex=[i,r,o]},methods:{getExpressTotal:function(){var t=this;t.$util.networkRequest({url:"/Express/GetExpressTotal",success:function(e){t.sentTotal=e.sendCount,t.receiveTotal=e.receiveCount,t.getSearch()}})},longSave:function(){var t=this,e=[];e.push(t.barcodeImg),t.$util.longSave(e)},clickMode:function(t){t==this.mode?this.mode="":this.mode=t},clickPaymode:function(t){t==this.paymode?this.paymode="":this.paymode=t},btnMore:function(){this.isMore=!this.isMore},btnNavTab:function(t){this.tabIndex!=t&&(this.tabIndex=t,1==t&&0==this.sentList.length&&this.getSearch(),2==t&&0==this.receiveList.length&&this.getSearch())},sentScroll:function(t){Math.ceil(this.sentTotal/this.limit)>=this.sentPage&&this.getSearch()},receiveScroll:function(t){Math.ceil(this.sentTotal/this.limit)>=this.receivePage&&this.getSearch()},goKeyword:function(){this.confirm()},reset:function(){this.mode="",this.status=[],this.paymode="",this.startDate="",this.endDate=""},confirm:function(){if(""!=this.startDate){if(""==this.endDate)return this.$util.showToast("结束日期不能为空"),!1;if(new Date(this.startDate)>=new Date(this.endDate))return this.$util.showToast("结束日期不能小于开始日期"),!1}this.sentPage=1,this.receivePage=1,this.sentList=[],this.receiveList=[],this.getSearch()},getSearch:function(){var e=this,s=1,i=1;1==e.tabIndex?(s="Sent",i=e.sentPage):(s="Receive",i=e.receivePage);var a=0==e.status.length?null:e.status;t.showLoading({title:"加载中..."});var r={limit:e.limit,page:i,expressType:s,keyword:e.keyword,mode:e.mode,status:a,paymode:e.paymode,startTime:e.startDate,endTime:e.endDate};e.isMore=!1,e.$util.networkRequest({url:"/Express/Search",method:"POST",data:r,success:function(a){var r=a.total;if(0==r||0==a.list.length)return!1;a.list.filter((function(t){null!=t.finishedTime&&""!=t.finishedTime&&(t.finishedTime=e.$util.formatDate.format(t.finishedTime,"yyyy-MM-dd hh:mm"))})),"Sent"==s&&(1==i&&"true"!=t.getStorageSync("barCode")&&(e.collect={isCompany:a.list[0].isCompany,expressCode:a.list[0].expressCode}),e.sentPage++,e.sentList=e.sentList.concat(a.list)),"Receive"==s&&(e.receivePage++,e.receiveList=e.receiveList.concat(a.list))}})},startPickerChange:function(t){var e=t.detail.value,s=this.startArray[0][e[0]].split("年")[0],i=this.startArray[1][e[1]].split("月")[0],a=this.startArray[2][e[2]].split("日")[0],r=s+"-"+i+"-"+a;if(r==this.endDate)return this.$util.showToast("开始时间与结束时间不能一致"),!1;this.startDate=r},startPickerColumn:function(t){new Date;var e=t.detail.value;switch(this.startIndex[t.detail.column]=e,t.detail.column){case 0:this.startArray[1]=this.$util.getMonth(this.startArray[0][e]),this.startArray[2]=this.$util.getDays(this.startArray[0][e],this.startArray[1][0]),this.startIndex.splice(1,1,0),this.startIndex.splice(2,1,0);break;case 1:this.startArray[2]=this.$util.getDays(this.startArray[0][this.startIndex[0]],this.startArray[1][e]),this.startIndex.splice(2,1,0);break}this.$forceUpdate()},endPickChange:function(t){var e=t.detail.value,s=this.endArray[0][e[0]].split("年")[0],i=this.endArray[1][e[1]].split("月")[0],a=this.endArray[2][e[2]].split("日")[0],r=s+"-"+i+"-"+a;if(r==this.startDate)return this.$util.showToast("开始时间与结束时间不能一致"),!1;this.endDate=r},endPickerColumn:function(t){new Date;var e=t.detail.value;switch(this.endIndex[t.detail.column]=e,t.detail.column){case 0:this.endArray[1]=this.$util.getMonth(this.endArray[0][e]),this.endArray[2]=this.$util.getDays(this.endArray[0][e],this.endArray[1][0]),this.endIndex.splice(1,1,0),this.endIndex.splice(2,1,0);break;case 1:this.endArray[2]=this.$util.getDays(this.endArray[0][this.endIndex[0]],this.endArray[1][e]),this.endIndex.splice(2,1,0);break}this.$forceUpdate()},clickStatus:function(t){-1==this.status.indexOf(t)?this.status.push(t):this.status=this.status.filter((function(e){return e!=t}))},setClip:function(e){t.setClipboardData({data:e,success:function(){t.showToast({title:"内容已复制",icon:"success"})}})},codeBtn:function(t){var e=this;e.$util.networkRequest({url:"/Express/GetExpressBarCodeFile",data:{mastCode:t},success:function(t){console.log(t),e.barcodeImg=t,e.longSave()}})},removeOrder:function(e){var s=this;t.showModal({title:"提示",content:"确定要删除此单吗？",success:function(t){t.confirm&&s.$util.networkRequest({url:"/Express/DeleteExpress",data:{mastCode:e,reason:""},method:"POST",success:function(t){1==s.tabIndex?(s.sentTotal--,s.sentList=s.sentList.filter((function(t){return t.mastCode!=e}))):(s.receiveTotal--,s.receiveList=s.receiveList.filter((function(t){return t.mastCode!=e})))}})}})},goPage:function(e,s){var i=1==this.tabIndex?"Sent":"Receive";1==e?t.navigateTo({url:"/pages/order/orderDetail?mastCode="+s+"&type="+i}):2==e&&t.navigateTo({url:"/pages/order/cancel?mastCode="+s})}}};e.default=s}).call(this,s("543d")["default"])},6402:function(t,e,s){"use strict";var i,a=function(){var t=this,e=t.$createElement,s=(t._self._c,t.__map(t.statusData,(function(e,s){var i=t.status.indexOf(e.key);return{$orig:t.__get_orig(e),g0:i}})));t._isMounted||(t.e0=function(e){t.isMore=!1},t.e1=function(e){t.isPicker=0},t.e2=function(e){t.isPicker=1},t.e3=function(e){t.isBarCode=!1}),t.$mp.data=Object.assign({},{$root:{l0:s}})},r=[];s.d(e,"b",(function(){return a})),s.d(e,"c",(function(){return r})),s.d(e,"a",(function(){return i}))},7675:function(t,e,s){"use strict";(function(t){s("b397");i(s("66fd"));var e=i(s("ee60"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,s("543d")["createPage"])},"9b55":function(t,e,s){"use strict";s.r(e);var i=s("63dc"),a=s.n(i);for(var r in i)"default"!==r&&function(t){s.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},b8a7:function(t,e,s){"use strict";var i=s("2334"),a=s.n(i);a.a},ee60:function(t,e,s){"use strict";s.r(e);var i=s("6402"),a=s("9b55");for(var r in a)"default"!==r&&function(t){s.d(e,t,(function(){return a[t]}))}(r);s("b8a7");var n,o=s("f0c5"),c=Object(o["a"])(a["default"],i["b"],i["c"],!1,null,"25718cb2",null,!1,i["a"],n);e["default"]=c.exports}},[["7675","common/runtime","common/vendor"]]]);