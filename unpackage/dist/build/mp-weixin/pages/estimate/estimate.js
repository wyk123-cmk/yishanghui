(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/estimate/estimate"],{"14ae":function(e,t,s){"use strict";s.r(t);var i=s("5443"),n=s.n(i);for(var a in i)"default"!==a&&function(e){s.d(t,e,(function(){return i[e]}))}(a);t["default"]=n.a},"4bc2":function(e,t,s){},"4d5b":function(e,t,s){"use strict";var i={addressPicker:function(){return Promise.all([s.e("common/vendor"),s.e("components/address-picker/address-picker")]).then(s.bind(null,"1238"))}},n=function(){var e=this,t=e.$createElement;e._self._c},a=[];s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i}))},5443:function(e,t,s){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){Promise.all([s.e("common/vendor"),s.e("components/address-picker/address-picker")]).then(function(){return resolve(s("1238"))}.bind(null,s)).catch(s.oe)},n=function(){s.e("components/sendTime-picker/sendTime-picker").then(function(){return resolve(s("a768"))}.bind(null,s)).catch(s.oe)},a={data:function(){return{sendValue:"选择寄件地址",sendCode:"",sendAddressDetail:"",repAddressDetail:"",receiveValue:"选择收件地址",receiveCode:"",expressCompany:{list:[],range:["全部"],index:0,code:"",path:""},sendInfo:{yfaddress:"请选择寄件地址",contactsCode:"",ad:"请输入详细地址",areaCode:""},repInfo:{yfaddress:"请选择收件地址",contactsCode:"",ad:"请输入详细地址",areaCode:""},popupShow:!1,startTime:8,endTime:19,setPickerIndex:[0],timeTabIndex:0,sendTime:"一小时内",weight:1,txtheight:"",txtWidth:"",txtLong:"",volume:0,isEstimate:!1,estimatePriceList:[],showImage:!1}},components:{addressPicker:i,sendTimePicker:n},onLoad:function(){var e=getApp();e.isToken(this)},onShow:function(){var e=getApp();this.showImage=e.globalData.isDiscountPopup,this.sendValue="选择寄件地址",this.sendCode="",this.receiveValue="选择收件地址",this.receiveCode="",this.expressCompany={list:[],range:["全部"],index:0,code:"",path:""},this.popupShow=!1,this.startTime=8,this.endTime=19,this.setPickerIndex=[0],this.timeTabInde=0,this.sendTime="一小时内",this.weight=1,this.txtheight="",this.txtWidth="",this.txtLong="",this.volume=0,this.isEstimate=!1,this.estimatePriceList=[],this.getExpressCompany(),this.setValue(),this.setDate("",this.endTime)},computed:{txtCubic1:function(){try{var e=Number(this.txtLong),t=Number(""==this.txtheight?0:this.txtheight),s=Number(""==this.txtWidth?0:this.txtWidth),i=e*t*s/1e6;return i}catch(n){}}},watch:{txtCubic1:function(e){this.volume=e>0?e:.01}},methods:{getAddressAuto:function(t,s){var i=this,n=i.$util.stripAddress(t.detail.value);e.request({url:i.apiUrl+"/AddressBook/GetAddressAutoInfo",header:{appId:i.appId,token:e.getStorageSync("token"),"content-type":"application/json"},data:{addressText:n},success:function(e){if(200!=e.data.errCode)return!1;var t=e.data.data,n=t.province+"-"+t.city+"-"+t.area;1==s&&(i.sendValue=n,i.sendCode=t.areaCode),2==s&&(i.receiveValue=n,i.receiveCode=t.areaCode)}})},setValue:function(){var e=this.$store.state.expressDeliveryInfo,t=e.sendAddress,s=e.repAddress;"{}"==JSON.stringify(t)?this.sendInfo={yfaddress:"请选择寄件地址",contactsCode:"",ad:"请输入详细地址",areaCode:""}:(this.sendInfo=t,this.sendCode=t.areaCode,this.sendAddressDetail=t.ad,this.sendValue=this.sendInfo.yfaddress,this.sendAddressDetail=this.sendInfo.ad),"{}"==JSON.stringify(s)?this.repInfo={yfaddress:"请选择收件地址",contactsCode:"",ad:"请输入详细地址",areaCode:""}:(this.repInfo=s,this.receiveCode=s.areaCode,this.repAddressDetail=s.ad,this.receiveValue=this.repInfo.yfaddress)},btnQuery:function(){var t=this;if(!t.$util.isNotEmpty(t.sendCode))return t.$util.showToast("请选择寄件地址"),!1;if(!t.$util.isNotEmpty(t.receiveCode))return t.$util.showToast("请选择收件地址"),!1;var s=t.expressCompany.code,i=t.expectedTime(),n={companyCode:s,areaCodeFrom:t.sendCode,fromAddress:t.sendAddressDetail,toAddress:t.repAddressDetail,areaCodeTo:t.receiveCode,weight:t.weight,sendTime:i,volume:t.volume};e.showLoading({title:"加载中..."}),t.estimatePriceList=[],t.$util.networkRequest({url:"/Price/EstimatePrice",method:"POST",data:n,success:function(e){if(0==e.length)return t.$util.showToast("暂时估不出产品类型,请稍后"),!1;t.isEstimate=!0,e.filter((function(e){e.price=e.price.toFixed(2),e.originalPrice=e.originalPrice.toFixed(2)})),t.estimatePriceList=e}})},addressPage:function(t,s){1==t&&e.navigateTo({url:"/pages/me/addressList?type="+s})},addWeight:function(){this.weight++},reduceWeight:function(){if(this.weight<=1)return!1;this.weight--},sendPickerChange:function(e){var t=this.setAddress(e,this.receiveValue);if(!t)return!1;this.sendValue=t.value,t.code!==this.sendCode&&(this.sendAddressDetail=""),this.sendCode=t.code},receivePickerChange:function(e){var t=this.setAddress(e,this.sendValue);if(!t)return!1;this.receiveValue=t.value,t.code!==this.receiveCode&&(this.repAddressDetail=""),this.receiveCode=t.code},getExpressCompany:function(){var e=this;this.$util.networkRequest({url:"/ExpressCompany/GetList",data:{companyType:"All"},success:function(t){e.expressCompany.list=t,t.forEach((function(t,s){e.expressCompany.range.push(t.companyName)}))}})},expressCompanyPickerChange:function(e){var t=e.detail.value,s="",i=8,n=19,a="";0!=t&&(s=this.expressCompany.list[t-1].companyCode,i=this.expressCompany.list[t-1].startTime,n=this.expressCompany.list[t-1].endTime,a=this.expressCompany.list[t-1].logoPath),this.expressCompany.index=t,this.expressCompany.code=s,this.expressCompany.path=a.replace(/\s*/g,""),this.startTime=i,this.endTime=n,this.setPickerIndex=[0],this.setDate(s,n)},open:function(){this.popupShow=!0},close:function(){this.popupShow=!1},timeChange:function(e){this.setPickerIndex=[Number(e.pickerIndex)],this.sendTime=e.txt,this.timeTabIndex=e.tabIndex},setAddress:function(e,t){var s=e.detail.value[0]+"-"+e.detail.value[1]+"-"+e.detail.value[2];return{value:s,code:e.detail.code[2]}},setDate:function(e,t){var s=new Date;s.getHours()>=this.endTime-1&&("sf001"==e||""==e||"ky001"==e)?this.timeTabIndex=1:s.getHours()>=this.endTime-2&&"db001"==e?this.timeTabIndex=1:this.timeTabIndex=0;var i=0==this.timeTabIndex?"":"明天";this.sendTime=""==e||"sf001"==e||"ky001"==e?i+" 一小时内":i+" 两小时内"},expectedTime:function(){var e=new Date,t="",s="";if(-1!=this.sendTime.indexOf("小时")){if(1==this.timeTabIndex)t=new Date(e.getTime()+864e5),s=this.startTime+":00";else{if("sf001"==this.expressCompany.code||"ky001"==this.expressCompany.code){if(this.endTime-1<(new Date).getHours()&&(new Date).getHours()<this.endTime)return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+this.endTime+":00";t=new Date(e.getTime()+36e5)}else{if(this.endTime-2<(new Date).getHours()&&(new Date).getHours()<this.endTime)return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+this.endTime+":00";t=new Date(e.getTime()+72e5)}s=t.getHours()+":"+t.getMinutes()}}else s=this.sendTime.split("-")[1],0==this.timeTabIndex?(t=new Date,"24:00"==s&&(s="23:59")):(t=new Date(e.getTime()+864e5*this.timeTabIndex),"24:00"==s&&(s="23:59"));return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+s}}};t.default=a}).call(this,s("543d")["default"])},9614:function(e,t,s){"use strict";(function(e){s("b397");i(s("66fd"));var t=i(s("b23a"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,s("543d")["createPage"])},aefc:function(e,t,s){"use strict";var i=s("4bc2"),n=s.n(i);n.a},b23a:function(e,t,s){"use strict";s.r(t);var i=s("4d5b"),n=s("14ae");for(var a in n)"default"!==a&&function(e){s.d(t,e,(function(){return n[e]}))}(a);s("aefc");var r,d=s("f0c5"),o=Object(d["a"])(n["default"],i["b"],i["c"],!1,null,"8ca49e92",null,!1,i["a"],r);t["default"]=o.exports}},[["9614","common/runtime","common/vendor"]]]);