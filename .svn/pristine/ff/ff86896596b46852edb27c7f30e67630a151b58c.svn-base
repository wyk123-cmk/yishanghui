<template>
	<view class="page_view">
		<view class="top">全部企业快递</view>
		<view class="ones" v-for="(item,index) in SetList" :key="index" @click="goPage(item.remark)">
			{{item.remark}}
			<switch class="swi" v-if="index==0" @change="SwitchChange" :checked="SWchecked"></switch>
			<view class="swi"  v-if="index==1"><text class="iconfont icon--right-jian"></text></view>
		</view>
		<!-- <view class="ones" >
			允许他(她)查看
		</view> -->
	</view>
</template>

<script>
	export default {
		data() {
			return {
				SetList: [],
				SWchecked: false
			}
		},
		onLoad() {
			let that = this;

			that.$util.networkRequest({
				url: "/CmpyRole/GetRoleList",
				data: {},
				success: res => {
					console.log(res);
					this.SetList = res;
					this.SetList.forEach(item=>{
						if(item.remark=="允许成员查看" && item.isChoose){
							this.SWchecked=true;
						}
					})
				}
			})
		},
		methods: {
			goPage(remark) {
				if(remark=="允许他(她)查看"){
					uni.navigateTo({
						url: "/pages/me/allowSee"
					})
				}
				
			},
			SwitchChange(e) {
				console.log(e.detail.value);
				this.SWchecked = e.detail.value;
				let that = this;
				let param = [{
					"serviceKey": "AllCmpyExpressList",
					"serviceValue": this.SWchecked
				}]

				that.$util.networkRequest({
					url: "/CmpyRole/SetCmpyRole",
					data: param,
					method: "POST",
					success: res => {
						console.log(res);
						
					}
				})
			}
		}
	}
</script>

<style scoped>
	page {
		background-color: #f7f7f7;
	}
.page_view {
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		overflow-y: auto;
		background-color: #f7f7f7;
		overflow-x: hidden;

	}
	.top {
		padding: 5px 15px;


	}

	.ones {
		padding: 5px 15px;
		background-color: #FFFFFF;
		position: relative;
		width: calc(100%-30px);
		display: flex;
		height: 35px;
		line-height: 35px;
		border-bottom: 1px solid #EEEEEE;

	}

	.swi {
		float: right;
		position: absolute;
		right: 15px;
	}
</style>
